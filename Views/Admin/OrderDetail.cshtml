@model backend.ViewModels.Admin.OrderDetailViewModel
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Đơn hàng #" + Model.OrderId;
    string FormatCurrency(decimal v) => v.ToString("N0", new System.Globalization.CultureInfo("vi-VN")) + " ₫";
}
<div class="admin-card">
    <h3>Chi tiết đơn hàng</h3>
    <div class="row">
        <div class="col-md-6">
            <p><strong>Khách hàng:</strong> @Model.CustomerName (@Model.CustomerEmail)</p>
            @if (!string.IsNullOrWhiteSpace(Model.CustomerPhone)) {<p><strong>Điện thoại:</strong> @Model.CustomerPhone</p>}
            @if (!string.IsNullOrWhiteSpace(Model.ShippingAddress)) {<p><strong>Địa chỉ:</strong> @Model.ShippingAddress</p>}
            <p><strong>Ngày:</strong> @Model.OrderDate.ToString("yyyy-MM-dd HH:mm")</p>
            <p><strong>Trạng thái:</strong> @Model.Status</p>
        </div>
        <div class="col-md-6">
            <p><strong>Tổng tiền:</strong> @FormatCurrency(Model.TotalAmount)</p>
            <form asp-controller="Admin" asp-action="UpdateOrderStatus" method="post" class="form-inline">
                <input type="hidden" name="orderId" value="@Model.OrderId" />
                <select name="status" class="form-control mr-2">
                    <option value="Pending" selected="@(Model.Status == "Pending")">Chờ xử lý</option>
                    <option value="Shipped" selected="@(Model.Status == "Shipped")">Đã gửi</option>
                    <option value="Completed" selected="@(Model.Status == "Completed")">Hoàn tất</option>
                    <option value="Cancelled" selected="@(Model.Status == "Cancelled")">Đã hủy</option>
                </select>
                <button type="submit" class="btn btn-primary"><i class="fas fa-sync"></i> Cập nhật</button>
            </form>
        </div>
    </div>
</div>
<div class="admin-card">
    <h3>Sản phẩm</h3>
    <div class="admin-table">
        <table>
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Số lượng</th>
                    <th>Đơn giá</th>
                    <th>Tạm tính</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var i in Model.Items)
            {
                <tr>
                    <td>@i.ProductName</td>
                    <td>@i.Quantity</td>
                    <td>@FormatCurrency(i.UnitPrice)</td>
                    <td>@FormatCurrency(i.Subtotal)</td>
                </tr>
            }
            </tbody>
        </table>
    </div>
</div>
